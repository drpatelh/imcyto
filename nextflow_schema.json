{
    "$schema": "http://json-schema.org/draft-07/schema",
    "$id": "https://raw.githubusercontent.com/nf-core/imcyto/master/nextflow_schema.json",
    "title": "nf-core/imcyto pipeline parameters",
    "description": "Image Mass Cytometry analysis pipeline.",
    "type": "object",
    "properties": {
        "outdir": {
            "type": "string",
            "description": "Output directory for results",
            "default": "./results",
            "fa_icon": "<i class=\"fas fa-folder-open\"></i>"
        },
        "name": {
            "type": "string",
            "description": "Workflow name",
            "fa_icon": "<i class=\"fas fa-fingerprint\"></i>",
            "help_text": "A custom name for the pipeline run. Unlike the core nextflow `-name` option with one hyphen this parameter can be reused multiple times, for example if using `-resume`. Passed through to steps such as MultiQC and used for things like report filenames and titles."
        },
        "email": {
            "type": "string",
            "description": "Email address for completion summary",
            "fa_icon": "<i class=\"fas fa-envelope\"></i>",
            "help_text": "An email address to send a summary email to when the pipeline is completed.",
            "pattern": "^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$"
        },
        "email_on_fail": {
            "type": "string",
            "description": "Email address for completion summary, only when pipeline fails",
            "fa_icon": "<i class=\"fas fa-exclamation-triangle\"></i>",
            "pattern": "^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$",
            "help_text": "An email address to send a summary email to when the pipeline is completed - ONLY sent if the pipeline does not exit successfully."
        },
        "plaintext_email": {
            "type": "boolean",
            "description": "Send plain-text email instead of HTML",
            "fa_icon": "<i class=\"fas fa-remove-format\"></i>",
            "hidden": true
        },
        "publish_dir_mode": {
            "type": "string",
            "default": "copy",
            "hidden": true,
            "description": "Method used to save pipeline results to output directory",
            "help_text": "The Nextflow `publishDir` option specifies which intermediate files should be saved to the output directory. This option tells the pipeline what method should be used to move these files. See https://www.nextflow.io/docs/latest/process.html#publishdir for details.",
            "fa_icon": "<i class=\"fas fa-copy\"></i>",
            "enum": [
                "symlink",
                "rellink",
                "link",
                "copy",
                "copyNoFollow",
                "mov"
            ]
        },
        "monochrome_logs": {
            "type": "boolean",
            "description": "Do not use coloured log outputs",
            "fa_icon": "<i class=\"fas fa-palette\"></i>",
            "hidden": true
        },
        "tracedir": {
            "type": "string",
            "description": "Directory to keep pipeline Nextflow logs and reports",
            "default": "./results/pipeline_info",
            "fa_icon": "<i class=\"fas fa-cogs\"></i>",
            "hidden": true
        },
        "Maximum job request limits": {
            "type": "object",
            "description": "Limit the maximum computational requirements that a single job can request",
            "default": "",
            "properties": {
                "max_cpus": {
                    "type": "integer",
                    "description": "Maximum number of CPUs that can be requested  for any single job",
                    "default": 16,
                    "fa_icon": "<i class=\"fas fa-microchip\"></i>",
                    "hidden": true
                },
                "max_memory": {
                    "type": "string",
                    "description": "Maximum amount of memory that can be requested for any single job",
                    "default": "128 GB",
                    "fa_icon": "<i class=\"fas fa-memory\"></i>",
                    "hidden": true
                },
                "max_time": {
                    "type": "string",
                    "description": "Maximum amount of time that can be requested for any single job",
                    "default": "10d",
                    "fa_icon": "<i class=\"far fa-clock\"></i>",
                    "hidden": true
                }
            }
        },
        "Institutional config params": {
            "type": "object",
            "description": "Params used by nf-core/configs",
            "default": "",
            "properties": {
                "custom_config_version": {
                    "type": "string",
                    "description": "nf-core/configs parameter",
                    "default": "master",
                    "hidden": true
                },
                "custom_config_base": {
                    "type": "string",
                    "description": "nf-core/configs parameter",
                    "default": "https://raw.githubusercontent.com/nf-core/configs/master",
                    "hidden": true
                },
                "hostnames": {
                    "type": "string",
                    "description": "nf-core/configs parameter",
                    "default": "",
                    "hidden": true
                },
                "config_profile_description": {
                    "type": "string",
                    "description": "nf-core/configs parameter",
                    "hidden": true
                },
                "config_profile_contact": {
                    "type": "string",
                    "description": "nf-core/configs parameter",
                    "hidden": true
                },
                "config_profile_url": {
                    "type": "string",
                    "description": "nf-core/configs parameter",
                    "hidden": true
                }
            }
        },
        "help": {
            "type": "boolean",
            "description": "Display help text",
            "hidden": true,
            "fa_icon": "<i class=\"fas fa-question-circle\"></i>"
        },
        "input": {
            "type": "string",
            "default": "'data/*.mcd'",
            "description": "Path to input data file(s) (globs must be surrounded with quotes). Currently supported formats are *.mcd, *.ome.tiff, *.txt"
        },
        "metadata": {
            "type": "string",
            "default": "'./metadata.csv'",
            "description": "Path to metadata csv file indicating which images to merge in full stack and/or Ilastik stack",
            "help_text": "Path to metadata `csv` file indicating which images to merge in full and/or Ilastik stack. The file should only contain 3 columns i.e. 'metal', 'full_stack' and 'ilastik_stack'. The `metal` column should contain all the metals used in your antibody panel. The `full_stack` and `ilastik_stack` entries should be `1` or `0` to indicate whether to include or exclude a metal for a given stack, respectively. See [`metadata.csv`](https://github.com/nf-core/test-datasets/blob/imcyto/inputs/metadata.csv) for an example."
        },
        "full_stack_cppipe": {
            "type": "string",
            "default": "false",
            "description": "CellProfiler pipeline file required to create full stack (cppipe format)"
        },
        "ilastik_stack_cppipe": {
            "type": "string",
            "default": "false",
            "description": "CellProfiler pipeline file required to create Ilastik stack (cppipe format)"
        },
        "segmentation_cppipe": {
            "type": "string",
            "default": "false",
            "description": "CellProfiler pipeline file required for segmentation (cppipe format)"
        },
        "ilastik_training_ilp": {
            "type": "string",
            "default": "false",
            "description": "Parameter file required by Ilastik (ilp format)"
        },
        "compensation_tiff": {
            "type": "string",
            "default": "false",
            "description": "Tiff file for compensation analysis during CellProfiler preprocessing steps"
        },
        "skip_ilastik": {
            "type": "boolean",
            "default": "False",
            "description": "Skip Ilastik processing step"
        },
        "plugins": {
            "type": "string",
            "default": "\"$baseDir/assets/plugins/\"",
            "description": "Path to directory with plugin files required for CellProfiler"
        },
        "clusterOptions": {
            "type": "string",
            "default": "false",
            "description": "Arguments passed to Nextflow clusterOptions",
            "hidden": true
        }
    },
    "required": [
        "input",
        "metadata",
        "full_stack_cppipe",
        "ilastik_stack_cppipe",
        "segmentation_cppipe"
    ]
}
